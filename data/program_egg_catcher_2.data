{"dom_code": "<xml xmlns=\"http://www.w3.org/1999/xhtml\"><block type=\"controls_whileUntil\" id=\"1\" inline=\"false\" x=\"35\" y=\"-426\"><field name=\"MODE\">WHILE</field><value name=\"BOOL\"><block type=\"logic_boolean\" id=\"2\"><field name=\"BOOL\">TRUE</field></block></value><statement name=\"DO\"><block type=\"text_print\" id=\"3\" inline=\"false\"><value name=\"TEXT\"><block type=\"text\" id=\"4\"><field name=\"TEXT\">looking for eggs</field></block></value><next><block type=\"variables_set\" id=\"5\" inline=\"true\"><field name=\"VAR\">egg_dist_angle</field><value name=\"VALUE\"><block type=\"coderbot_adv_findColor\" id=\"6\" inline=\"true\"><field name=\"RETVAL\">BOTH</field><value name=\"COLOR\"><block type=\"colour_picker\" id=\"7\"><field name=\"COLOUR\">#ff0000</field></block></value></block></value><next><block type=\"variables_set\" id=\"8\" inline=\"true\"><field name=\"VAR\">egg_dist</field><value name=\"VALUE\"><block type=\"math_round\" id=\"9\" inline=\"false\"><field name=\"OP\">ROUND</field><value name=\"NUM\"><block type=\"lists_getIndex\" id=\"10\" inline=\"true\"><mutation statement=\"false\" at=\"false\"></mutation><field name=\"MODE\">GET</field><field name=\"WHERE\">FIRST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"11\"><field name=\"VAR\">egg_dist_angle</field></block></value></block></value></block></value><next><block type=\"variables_set\" id=\"12\" inline=\"true\"><field name=\"VAR\">egg_angle</field><value name=\"VALUE\"><block type=\"math_round\" id=\"13\" inline=\"false\"><field name=\"OP\">ROUND</field><value name=\"NUM\"><block type=\"lists_getIndex\" id=\"14\" inline=\"true\"><mutation statement=\"false\" at=\"false\"></mutation><field name=\"MODE\">GET</field><field name=\"WHERE\">LAST</field><value name=\"VALUE\"><block type=\"variables_get\" id=\"15\"><field name=\"VAR\">egg_dist_angle</field></block></value></block></value></block></value><next><block type=\"controls_if\" id=\"16\" inline=\"false\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"17\" inline=\"true\"><field name=\"OP\">GTE</field><value name=\"A\"><block type=\"variables_get\" id=\"18\"><field name=\"VAR\">egg_dist</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"19\"><field name=\"NUM\">0</field></block></value></block></value><statement name=\"DO0\"><block type=\"text_print\" id=\"20\" inline=\"false\"><value name=\"TEXT\"><block type=\"text_join\" id=\"21\" inline=\"false\"><mutation items=\"5\"></mutation><value name=\"ADD0\"><block type=\"text\" id=\"22\"><field name=\"TEXT\">egg found at: </field></block></value><value name=\"ADD1\"><block type=\"variables_get\" id=\"23\"><field name=\"VAR\">egg_dist</field></block></value><value name=\"ADD2\"><block type=\"text\" id=\"24\"><field name=\"TEXT\">cm, </field></block></value><value name=\"ADD3\"><block type=\"variables_get\" id=\"25\"><field name=\"VAR\">egg_angle</field></block></value><value name=\"ADD4\"><block type=\"text\" id=\"26\"><field name=\"TEXT\"> degree</field></block></value></block></value><next><block type=\"controls_if\" id=\"27\" inline=\"false\"><mutation else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_operation\" id=\"28\" inline=\"true\"><field name=\"OP\">AND</field><value name=\"A\"><block type=\"logic_operation\" id=\"29\" inline=\"true\"><field name=\"OP\">OR</field><value name=\"A\"><block type=\"logic_compare\" id=\"30\" inline=\"true\"><field name=\"OP\">GTE</field><value name=\"A\"><block type=\"variables_get\" id=\"31\"><field name=\"VAR\">egg_angle</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"32\"><field name=\"NUM\">3</field></block></value></block></value><value name=\"B\"><block type=\"logic_compare\" id=\"33\" inline=\"true\"><field name=\"OP\">LTE</field><value name=\"A\"><block type=\"variables_get\" id=\"34\"><field name=\"VAR\">egg_angle</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"35\"><field name=\"NUM\">-3</field></block></value></block></value></block></value><value name=\"B\"><block type=\"logic_compare\" id=\"36\" inline=\"true\"><field name=\"OP\">GT</field><value name=\"A\"><block type=\"variables_get\" id=\"37\"><field name=\"VAR\">egg_dist</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"38\"><field name=\"NUM\">20</field></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\" id=\"39\" inline=\"false\"><mutation elseif=\"3\" else=\"1\"></mutation><value name=\"IF0\"><block type=\"logic_compare\" id=\"40\" inline=\"true\"><field name=\"OP\">GTE</field><value name=\"A\"><block type=\"variables_get\" id=\"41\"><field name=\"VAR\">egg_angle</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"42\"><field name=\"NUM\">15</field></block></value></block></value><statement name=\"DO0\"><block type=\"coderbot_adv_move\" id=\"43\" inline=\"true\"><field name=\"ACTION\">RIGHT</field><value name=\"SPEED\"><block type=\"math_number\" id=\"44\"><field name=\"NUM\">80</field></block></value><value name=\"ELAPSE\"><block type=\"math_number\" id=\"45\"><field name=\"NUM\">0.2</field></block></value></block></statement><value name=\"IF1\"><block type=\"logic_compare\" id=\"46\" inline=\"true\"><field name=\"OP\">GTE</field><value name=\"A\"><block type=\"variables_get\" id=\"47\"><field name=\"VAR\">egg_angle</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"48\"><field name=\"NUM\">3</field></block></value></block></value><statement name=\"DO1\"><block type=\"coderbot_adv_move\" id=\"49\" inline=\"true\"><field name=\"ACTION\">RIGHT</field><value name=\"SPEED\"><block type=\"math_number\" id=\"50\"><field name=\"NUM\">80</field></block></value><value name=\"ELAPSE\"><block type=\"math_number\" id=\"51\"><field name=\"NUM\">0.05</field></block></value></block></statement><value name=\"IF2\"><block type=\"logic_compare\" id=\"52\" inline=\"true\"><field name=\"OP\">LTE</field><value name=\"A\"><block type=\"variables_get\" id=\"53\"><field name=\"VAR\">egg_angle</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"54\"><field name=\"NUM\">-15</field></block></value></block></value><statement name=\"DO2\"><block type=\"coderbot_adv_move\" id=\"55\" inline=\"true\"><field name=\"ACTION\">LEFT</field><value name=\"SPEED\"><block type=\"math_number\" id=\"56\"><field name=\"NUM\">80</field></block></value><value name=\"ELAPSE\"><block type=\"math_number\" id=\"57\"><field name=\"NUM\">0.2</field></block></value></block></statement><value name=\"IF3\"><block type=\"logic_compare\" id=\"58\" inline=\"true\"><field name=\"OP\">LTE</field><value name=\"A\"><block type=\"variables_get\" id=\"59\"><field name=\"VAR\">egg_angle</field></block></value><value name=\"B\"><block type=\"math_number\" id=\"60\"><field name=\"NUM\">-3</field></block></value></block></value><statement name=\"DO3\"><block type=\"coderbot_adv_move\" id=\"61\" inline=\"true\"><field name=\"ACTION\">LEFT</field><value name=\"SPEED\"><block type=\"math_number\" id=\"62\"><field name=\"NUM\">80</field></block></value><value name=\"ELAPSE\"><block type=\"math_number\" id=\"63\"><field name=\"NUM\">0.05</field></block></value></block></statement><statement name=\"ELSE\"><block type=\"coderbot_adv_move\" id=\"64\" inline=\"true\"><field name=\"ACTION\">FORWARD</field><value name=\"SPEED\"><block type=\"math_number\" id=\"65\"><field name=\"NUM\">100</field></block></value><value name=\"ELAPSE\"><block type=\"math_number\" id=\"66\"><field name=\"NUM\">0.4</field></block></value></block></statement></block></statement><statement name=\"ELSE\"><block type=\"coderbot_adv_move\" id=\"67\" inline=\"true\"><field name=\"ACTION\">FORWARD</field><value name=\"SPEED\"><block type=\"math_number\" id=\"68\"><field name=\"NUM\">100</field></block></value><value name=\"ELAPSE\"><block type=\"math_number\" id=\"69\"><field name=\"NUM\">2</field></block></value></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"coderbot_adv_move\" id=\"70\" inline=\"true\"><field name=\"ACTION\">RIGHT</field><value name=\"SPEED\"><block type=\"math_number\" id=\"71\"><field name=\"NUM\">80</field></block></value><value name=\"ELAPSE\"><block type=\"math_number\" id=\"72\"><field name=\"NUM\">0.4</field></block></value></block></statement><next><block type=\"coderbot_adv_move\" id=\"73\" inline=\"true\"><field name=\"ACTION\">RIGHT</field><value name=\"SPEED\"><block type=\"math_number\" id=\"74\"><field name=\"NUM\">0</field></block></value><value name=\"ELAPSE\"><block type=\"math_number\" id=\"75\"><field name=\"NUM\">0.2</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>", "code": "import math\n\negg_dist_angle = None\negg_dist = None\negg_angle = None\n\n\nwhile True:\n  get_prog_eng().check_end()\n  get_cam().set_text('looking for eggs')\n  egg_dist_angle = get_cam().find_color('#ff0000')\n  egg_dist = round(egg_dist_angle[0])\n  egg_angle = round(egg_dist_angle[-1])\n  if egg_dist >= 0:\n    get_cam().set_text(''.join([str(temp_value) for temp_value in ['egg found at: ', egg_dist, 'cm, ', egg_angle, ' degree']]))\n    if (egg_angle >= 3 or egg_angle <= -3) and egg_dist > 20:\n      if egg_angle >= 15:\n        get_bot().right(speed=80, elapse=0.2)\n      elif egg_angle >= 3:\n        get_bot().right(speed=80, elapse=0.05)\n      elif egg_angle <= -15:\n        get_bot().left(speed=80, elapse=0.2)\n      elif egg_angle <= -3:\n        get_bot().left(speed=80, elapse=0.05)\n      else:\n        get_bot().forward(speed=100, elapse=0.4)\n    else:\n      get_bot().forward(speed=100, elapse=2)\n  else:\n    get_bot().right(speed=80, elapse=0.4)\n  get_bot().right(speed=0, elapse=0.2)\n", "name": "egg_catcher_2"}